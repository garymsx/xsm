/**
 * 汎用掛け算処理、HL *= BCを実行
 * @param  HL 掛けられる数
 * @param  BC 掛ける数
 * @return HL 計算結果
 * @remark BC == 0でループが終了するので速度が一定ではない
 */
function MULW(HL,BC) return HL {
    using(DE,BC) {
        ex DE,HL;
        HL = 0;
        @ {
            BC>>;               // MULと違いローテーションを使わない
            if($C) HL += DE;
            DE<<;
            // Aレジスタ保護の為、ループを使わずにBCレジスタの0判定をしている
            // 0判定はINC B/DEC Bが実行される
            if(B != 0 || C != 0) continue;
        }
        return HL;
    }
}
