# Z80用 クロスアセンブラ XSM リファレンスマニュアル

## リテラル

### 数値

数値リテラルは2,4,8,10,16進数をサポートしています。

```
0b1111  - 2進数
0q123   - 4進数
077     - 8進数
127     - 10進数、0で始まってはいけません
0xff    - 16進数
```

### 文字

1バイト文字をシングルクォーテーション(')で囲むと、その文字のASCIIコードが取得できます。

```
'A'
'\n'  - \nはエスケープシーケンスで改行コード(LF)を表す
```

### 文字列

文字列はダブルクォーテーション(")で囲みます。  
文字列の最後には終了文字としてNULL文字(ASCIIコード0)が挿入されます。

```
"ABC"
```

### エスケープシーケンス

文字、文字列で制御文字を入力するにはエスケープシーケンスを使います。  
エスケープシーケンスの開始はバックスラッシュ"\" または "￥" を使います。  
どちらも同じ文字ですがエディタにより表示が変わります。

```
\"  - "を入力します
\a  - ベル
\b  - バックスペース
\t  - タブ
\n  - 改行
\v  - 垂直タブ
\f  - 改ページ
\r  - 復帰
\0  - NULL文字(0)
\x  - \xに続く16進数の00～ffで文字コードを直接指定した入力ができます。 
\e  - エスケープコード、\eに続く文字で画面の制御コードを送ることが出来ます。
\\  - \ 記号
```

### エスケープコード

エスケープコード、こちらもエスケープシーケンスと呼ばれることはありますが便宜上こちらはエスケープコードとします。
エスケープコードの仕様は動作する環境により変わってきます。もしくはまったく動作しません。
MSXの場合はDatapackによると以下のようになっています。

|シーケンス|コード|機能|
|---|---|---|
|\e A|カーソルを上に移動|
|\e B|カーソルを下に移動|
|\e C|カーソルを右に移動|
|\e D|カーソルを左に移動|
|\e H|カーソルをホームポジションに移動する|
|\e Y<20H+Y><20H+X>|カーソルを(X,Y)の位置に移動|
|\e j|画面をクリア|
|\e E|画面をクリア|
|\e K|行の終わりまで削除|
|\e l|行の終わりまで削除|
|\e J|画面の終わりまで削除|
|\e L|1行挿入|
|\e M|1行削除|
|\e x4|カーソルの形を■にする|
|\e x5|カーソルを消す|
|\e y4|カーソルの形を＿にする|
|\e y5|カーソルを表示する|
